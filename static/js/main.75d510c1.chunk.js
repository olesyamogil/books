(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{25:function(e,t,a){e.exports=a(39)},31:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),s=a(23),i=a(14),u=a.n(i),l=a(24),m=a(2),h=a(3),p=a(5),b=a(4),d=a(6),f=a(7),j=(a(31),function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.books,a=e.authors,n=+this.props.match.match.params.id,o={};if(n)for(var c in t)t[c].categoryId===n&&(o[c]=t[c]);else o=t;return r.a.createElement("ol",{className:"books-list"},Object.keys(o).map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("div",{className:"bookCard"},r.a.createElement(f.b,{to:"/books/".concat(e)},o[e].title),r.a.createElement("ul",null,"Authors:",o[e].authorsIds.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(f.b,{to:"/authors/".concat(e)},a[e].name))})))))})))}}]),t}(n.Component)),E=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.data.authors;return r.a.createElement("ol",{className:"authors-list"},Object.keys(e).map((function(t){return r.a.createElement("li",{key:t},r.a.createElement(f.b,{to:"authors/".concat(t)},e[t].name))})))}}]),t}(n.Component),O=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.data.categories;return r.a.createElement("ol",{className:"categories-list"},Object.keys(e).map((function(t){return r.a.createElement("li",{key:t},r.a.createElement(f.b,{to:"categories/".concat(t)},e[t].name))})))}}]),t}(n.Component),k=(a(37),function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"tabs"},this.props.tabs.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(f.c,{className:"tab",activeClassName:"tab-active",to:"/".concat(e)},e))})))}}]),t}(n.Component)),y=a(11),v=(a(38),function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"tab-content"},r.a.createElement(y.c,null,this.props.content.map((function(e){return r.a.createElement(y.a,{key:e.path,exact:!0,path:e.path,render:e.component})}))))}}]),t}(n.Component)),g=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.match.match.params.id,t=this.props.data,a=t.books,n=t.authors,o=t.categories,c=a[e].categoryId;return r.a.createElement("div",{className:"book-info",key:e},r.a.createElement("p",{className:"book-info__title"},a[e].title),r.a.createElement("ul",{className:"book-info__authors"},"Authors:",a[e].authorsIds.map((function(e){return r.a.createElement("li",null,r.a.createElement(f.b,{to:"/authors/".concat(e)},n[e].name))}))),r.a.createElement("p",{className:"book-info__category"},"Category: ",r.a.createElement("br",null),r.a.createElement(f.b,{to:"/categories/".concat(c)},o[c].name)),r.a.createElement("p",{className:"book-info__about"},"Short description: ",r.a.createElement("br",null),a[e].shortDescription))}}]),t}(n.Component),N=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.match.match.params.id)}}]),t}(n.Component),_=(n.Component,function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={isLoading:!1,error:!1,data:null,routes:[{path:"/books",component:function(e){return r.a.createElement(j,{data:a.state.data,match:e})}},{path:"/books/:id",component:function(e){return r.a.createElement(g,{match:e,data:a.state.data})}},{path:"/authors",component:function(){return r.a.createElement(E,{data:a.state.data})}},{path:"/authors/:id",component:function(e){return r.a.createElement(N,{match:e,data:a.state.data})}},{path:"/categories",component:function(){return r.a.createElement(O,{data:a.state.data})}},{path:"/categories/:id",component:function(e){return r.a.createElement(j,{match:e,data:a.state.data})}}]},a.normalizeData=function(e){var t={};return e.forEach((function(e){t[e.id]=Object(l.a)({},e)})),t},a.getDatafromServer=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e).then((function(e){return e.json()})));case 1:case"end":return t.stop()}}))},a.loadData=function(){var e,t,n,r,o;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a.setState({isLoading:!0,error:!1}),c.prev=1,c.next=4,u.a.awrap(Promise.all([a.getDatafromServer("https://raw.githubusercontent.com/olesyamogil/books/master/database/books.json"),a.getDatafromServer("https://raw.githubusercontent.com/olesyamogil/books/master/database/authors.json"),a.getDatafromServer("https://raw.githubusercontent.com/olesyamogil/books/master/database/categories.json")]));case 4:e=c.sent,t=Object(s.a)(e,3),n=t[0],r=t[1],o=t[2],a.setState({data:{books:a.normalizeData(n),authors:a.normalizeData(r),categories:a.normalizeData(o)}}),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),a.setState({error:!0});case 15:return c.prev=15,a.setState({isLoading:!1}),c.finish(15);case 18:case"end":return c.stop()}}),null,null,[[1,12,15,18]])},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){return null===this.state.data?r.a.createElement("div",{className:"errorMessage"},this.state.error?r.a.createElement("p",{className:"errorMessage__text"},"Opps...Could not fetch data from server. Try again."):r.a.createElement("p",{className:"errorMessage__text"},"Loading..."),r.a.createElement("button",{type:"button",onClick:this.loadData,className:"errorMessage__button"},"Load data")):r.a.createElement(f.a,null,r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header__title"},"Book Catalog"),r.a.createElement(k,{tabs:Object.keys(this.state.data)})),r.a.createElement(v,{content:this.state.routes}))}}]),t}(n.Component));var C=function(){return r.a.createElement(_,null)};c.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.75d510c1.chunk.js.map