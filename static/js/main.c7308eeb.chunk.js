(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{177:function(e,t,a){e.exports=a(317)},183:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){},317:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(39),s=a.n(o),c=a(167),i=a(78),u=a.n(i),l=a(155),m=a(14),h=a(15),d=a(16),b=a(17),p=a(18),f=a(22),g=(a(183),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.books,a=e.authors,n=+this.props.match.match.params.id,o={};if(n)for(var s in t)t[s].categoryId===n&&(o[s]=t[s]);else o=t;return r.a.createElement("ol",{className:"books-list"},Object.keys(o).map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("div",{className:"bookCard"},r.a.createElement(f.b,{to:"/books/".concat(e)},o[e].title),r.a.createElement("ul",null,"Authors:",o[e].authorsIds.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(f.b,{to:"/authors/".concat(e)},a[e].name))})))))})))}}]),t}(n.Component)),v=a(325),E=a(50),j=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:0},a.handleClick=function(e,t){var n=t.index,r=a.state.activeIndex===n?-1:n;a.setState({activeIndex:r})},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.authors,n=t.books,o=this.state.activeIndex;return r.a.createElement(v.a,null,Object.keys(a).map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a.Title,{active:o===Number(t),index:Number(t),onClick:e.handleClick},r.a.createElement(E.a,{name:"dropdown"}),a[t].name),r.a.createElement(v.a.Content,{active:o===Number(t)},r.a.createElement(f.b,{to:"authors/".concat(t)},"Go to author`s page"),Object.values(n).filter((function(e){return e.authorsIds.includes(Number(t))})).map((function(e){return r.a.createElement(f.b,{to:"/books/".concat(e.id)},n[e.id].title)}))))})))}}]),t}(n.Component),k=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.data.categories;return r.a.createElement("ol",{className:"categories-list"},Object.keys(e).map((function(t){return r.a.createElement("li",{key:t},r.a.createElement(f.b,{to:"categories/".concat(t)},e[t].name))})))}}]),t}(n.Component),O=(a(289),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"tabs"},this.props.tabs.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(f.c,{className:"tab",activeClassName:"tab-active",to:"/".concat(e)},e))})))}}]),t}(n.Component)),y=a(35),N=(a(290),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"tab-content"},r.a.createElement(y.c,null,this.props.content.map((function(e){return r.a.createElement(y.a,{key:e.path,exact:!0,path:e.path,render:e.component})}))))}}]),t}(n.Component)),S=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.match.match.params.id,t=this.props.data,a=t.books,n=t.authors,o=t.categories,s=a[e].categoryId;return r.a.createElement("div",{className:"book-info",key:e},r.a.createElement("p",{className:"book-info__title"},a[e].title),r.a.createElement("ul",{className:"book-info__authors"},"Authors:",a[e].authorsIds.map((function(e){return r.a.createElement("li",null,r.a.createElement(f.b,{to:"/authors/".concat(e)},n[e].name))}))),r.a.createElement("p",{className:"book-info__category"},"Category: ",r.a.createElement("br",null),r.a.createElement(f.b,{to:"/categories/".concat(s)},o[s].name)),r.a.createElement("p",{className:"book-info__about"},"Short description: ",r.a.createElement("br",null),a[e].shortDescription))}}]),t}(n.Component),C=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=+this.props.match.match.params.id,t=this.props.data,a=t.authors,n=t.books,o=[];for(var s in n)n[s].authorsIds.includes(e)&&o.push(+s);return r.a.createElement("div",{className:"author-info"},r.a.createElement("p",{className:"author-info__name"},a[e].name),r.a.createElement("p",{className:"author-info__biography"},"Biography: ",r.a.createElement("br",null),a[e].biography),r.a.createElement("ul",{className:"author-info__books"},o.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(f.b,{to:"/books/".concat(e)},n[e].title))}))))}}]),t}(n.Component),_=a(58),x=a.n(_),w=a(324),D={isLoading:!1,results:[],value:""},I={books:{name:"books",results:[{id:1,title:"Unlocking Android"},{id:2,title:"Android in Action, Second Edition"},{id:3,title:"Flexible Rails"},{id:4,title:"Hello! Flex 4"},{id:5,title:"JSTL in Action"}]},authors:{name:"authors",results:[{id:1,title:"W. Frank Ableson",biography:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Diam in arcu cursus euismod quis."},{id:2,title:"Peter Armstrong",biography:"Etiam non quam lacus suspendisse faucibus. Sagittis eu volutpat odio facilisis mauris sit. Nisl condimentum id venenatis a condimentum."},{id:3,title:"Shawn Bayern",biography:"Maecenas sed enim ut sem viverra aliquet eget sit amet. Massa id neque aliquam vestibulum morbi blandit cursus. Feugiat vivamus at augue eget arcu dictum varius duis at."}]},categories:{name:"categories",results:[{id:1,title:"Software Engineering"},{id:2,title:"Internet"},{id:3,title:"Web Development"}]}},A=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state=D,a.handleResultSelect=function(e,t){var n=t.result;return a.setState({value:n.title})},a.handleSearchChange=function(e,t){var n=t.value;a.setState({isLoading:!0,value:n}),setTimeout((function(){if(a.state.value.length<1)return a.setState(D);var e=new RegExp(x.a.escapeRegExp(a.state.value),"i"),t=function(t){return e.test(t.title)},n=x.a.reduce(I,(function(e,a,n){var r=x.a.filter(a.results,t);return r.length&&(e[n]={name:n,results:r}),e}),{});a.setState({isLoading:!1,results:n})}),300)},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.value,n=e.results;return r.a.createElement(w.a,Object.assign({category:!0,loading:t,onResultSelect:this.handleResultSelect,onSearchChange:x.a.debounce(this.handleSearchChange,500,{leading:!0}),results:n,value:a},this.props))}}]),t}(n.Component),L=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={isLoading:!1,error:!1,data:null,routes:[{path:"/books",component:function(e){return r.a.createElement(g,{data:a.state.data,match:e})}},{path:"/books/:id",component:function(e){return r.a.createElement(S,{match:e,data:a.state.data})}},{path:"/authors",component:function(){return r.a.createElement(j,{data:a.state.data})}},{path:"/authors/:id",component:function(e){return r.a.createElement(C,{match:e,data:a.state.data})}},{path:"/categories",component:function(){return r.a.createElement(k,{data:a.state.data})}},{path:"/categories/:id",component:function(e){return r.a.createElement(g,{match:e,data:a.state.data})}}]},a.normalizeData=function(e){var t={};return e.forEach((function(e){t[e.id]=Object(l.a)({},e)})),t},a.getDatafromServer=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e).then((function(e){return e.json()})));case 1:case"end":return t.stop()}}))},a.loadData=function(){var e,t,n,r,o;return u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a.setState({isLoading:!0,error:!1}),s.prev=1,s.next=4,u.a.awrap(Promise.all([a.getDatafromServer("https://raw.githubusercontent.com/olesyamogil/books/master/database/books.json"),a.getDatafromServer("https://raw.githubusercontent.com/olesyamogil/books/master/database/authors.json"),a.getDatafromServer("https://raw.githubusercontent.com/olesyamogil/books/master/database/categories.json")]));case 4:e=s.sent,t=Object(c.a)(e,3),n=t[0],r=t[1],o=t[2],a.setState({data:{books:a.normalizeData(n),authors:a.normalizeData(r),categories:a.normalizeData(o)}}),s.next=15;break;case 12:s.prev=12,s.t0=s.catch(1),a.setState({error:!0});case 15:return s.prev=15,a.setState({isLoading:!1}),s.finish(15);case 18:case"end":return s.stop()}}),null,null,[[1,12,15,18]])},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){return null===this.state.data?r.a.createElement("div",{className:"errorMessage"},this.state.error?r.a.createElement("p",{className:"errorMessage__text"},"Opps...Could not fetch data from server. Try again."):r.a.createElement("p",{className:"errorMessage__text"},"Loading..."),r.a.createElement("button",{type:"button",onClick:this.loadData,className:"errorMessage__button"},"Load data")):r.a.createElement(f.a,null,r.a.createElement("header",{className:"page-header"},r.a.createElement("h1",{className:"page-header__title"},"Book Catalog"),r.a.createElement(A,null),r.a.createElement(O,{tabs:Object.keys(this.state.data)})),r.a.createElement(N,{content:this.state.routes}))}}]),t}(n.Component);var M=function(){return r.a.createElement(L,null)};s.a.render(r.a.createElement(M,null),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.c7308eeb.chunk.js.map