(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{177:function(e,t,a){e.exports=a(317)},183:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){},317:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(39),s=a.n(o),i=a(167),c=a(78),l=a.n(c),u=a(155),m=a(14),d=a(15),h=a(16),p=a(17),b=a(18),f=a(22),g=(a(183),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.books,a=e.authors,n=+this.props.match.match.params.id,o={};if(n)for(var s in t)t[s].categoryId===n&&(o[s]=t[s]);else o=t;return r.a.createElement("ol",{className:"books-list"},Object.keys(o).map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("div",{className:"bookCard"},r.a.createElement(f.b,{to:"/books/".concat(e)},o[e].title),r.a.createElement("ul",null,"Authors:",o[e].authorsIds.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(f.b,{to:"/authors/".concat(e)},a[e].name))})))))})))}}]),t}(n.Component)),v=a(325),y=a(50),E=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:0},a.handleClick=function(e,t){var n=t.index,r=a.state.activeIndex===n?-1:n;a.setState({activeIndex:r})},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.authors,n=t.books,o=this.state.activeIndex;return r.a.createElement(v.a,null,Object.keys(a).map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a.Title,{active:o===Number(t),index:Number(t),onClick:e.handleClick},r.a.createElement(y.a,{name:"dropdown"}),a[t].name),r.a.createElement(v.a.Content,{active:o===Number(t)},r.a.createElement(f.b,{to:"authors/".concat(t)},"Go to author`s page"),Object.values(n).filter((function(e){return e.authorsIds.includes(Number(t))})).map((function(e){return r.a.createElement(f.b,{to:"/books/".concat(e.id)},n[e.id].title)}))))})))}}]),t}(n.Component),k=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.data.categories;return r.a.createElement("ol",{className:"categories-list"},Object.keys(e).map((function(t){return r.a.createElement("li",{key:t},r.a.createElement(f.b,{to:"categories/".concat(t)},e[t].name))})))}}]),t}(n.Component),j=(a(289),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"tabs"},this.props.tabs.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(f.c,{className:"tab",activeClassName:"tab-active",to:"/".concat(e)},e))})))}}]),t}(n.Component)),O=a(35),S=(a(290),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"tab-content"},r.a.createElement(O.c,null,this.props.content.map((function(e){return r.a.createElement(O.a,{key:e.path,exact:!0,path:e.path,render:e.component})}))))}}]),t}(n.Component)),x=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.match.match.params.id,t=this.props.data,a=t.books,n=t.authors,o=t.categories,s=a[e].categoryId;return r.a.createElement("div",{className:"book-info",key:e},r.a.createElement("p",{className:"book-info__title"},a[e].title),r.a.createElement("ul",{className:"book-info__authors"},"Authors:",a[e].authorsIds.map((function(e){return r.a.createElement("li",null,r.a.createElement(f.b,{to:"/authors/".concat(e)},n[e].name))}))),r.a.createElement("p",{className:"book-info__category"},"Category: ",r.a.createElement("br",null),r.a.createElement(f.b,{to:"/categories/".concat(s)},o[s].name)),r.a.createElement("p",{className:"book-info__about"},"Short description: ",r.a.createElement("br",null),a[e].shortDescription))}}]),t}(n.Component),N=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=+this.props.match.match.params.id,t=this.props.data,a=t.authors,n=t.books,o=[];for(var s in n)n[s].authorsIds.includes(e)&&o.push(+s);return r.a.createElement("div",{className:"author-info"},r.a.createElement("p",{className:"author-info__name"},a[e].name),r.a.createElement("p",{className:"author-info__biography"},"Biography: ",r.a.createElement("br",null),a[e].biography),r.a.createElement("ul",{className:"author-info__books"},o.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(f.b,{to:"/books/".concat(e)},n[e].title))}))))}}]),t}(n.Component),w=a(58),C=a.n(w),D=a(324),I={isLoading:!1,results:[],value:""},_={books:{name:"books",results:[{id:1,title:"Unlocking Android",shortDescription:"Unlocking Android: A Developer's Guide provides concise, hands-on instruction for the Android operating system and development tools. This book teaches important architectural concepts in a straightforward writing style and builds on this with practical and useful examples throughout.",authorsIds:[1],categoryId:1},{id:2,title:"Android in Action, Second Edition",shortDescription:"Android in Action, Second Edition is a comprehensive tutorial for Android developers. Taking you far beyond \"Hello Android,\" this fast-paced book puts you in the driver's seat as you learn important architectural concepts and implementation strategies. You'll master the SDK, build WebKit apps using HTML 5, and even learn to extend or replace Android's built-in features by building useful and intriguing examples. ",authorsIds:[1,2],categoryId:1},{id:3,title:"Flexible Rails",shortDescription:"Flexible Rails created a standard to which I hold other technical books. You definitely get your money's worth.",authorsIds:[2],categoryId:3},{id:4,title:"Hello! Flex 4",shortDescription:"Hello! Flex 4 progresses through 26 self-contained examples selected so you can progressively master Flex. They vary from small one-page apps, to a 3D rotating haiku, to a Connect Four-like game. And in the last chapter you'll learn to build a full Flex application called SocialStalkr   a mashup that lets you follow your friends by showing their tweets on a Yahoo map.",authorsIds:[2],categoryId:2},{id:5,title:"JSTL in Action",shortDescription:"JSTL is an important simplification of the Java web platform. With JSTL, page authors can now write dynamic pages using standard HTML-like tags and an easy-to-learn expression language.",authorsIds:[3],categoryId:2}]},authors:{name:"authors",results:[{id:1,title:"W. Frank Ableson",biography:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Diam in arcu cursus euismod quis."},{id:2,title:"Peter Armstrong",biography:"Etiam non quam lacus suspendisse faucibus. Sagittis eu volutpat odio facilisis mauris sit. Nisl condimentum id venenatis a condimentum."},{id:3,title:"Shawn Bayern",biography:"Maecenas sed enim ut sem viverra aliquet eget sit amet. Massa id neque aliquam vestibulum morbi blandit cursus. Feugiat vivamus at augue eget arcu dictum varius duis at."}]},categories:{name:"categories",results:[{id:1,title:"Software Engineering"},{id:2,title:"Internet"},{id:3,title:"Web Development"}]}},A=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state=I,a.handleResultSelect=function(e,t){var n=t.result;return a.setState({value:n.title})},a.handleSearchChange=function(e,t){var n=t.value;a.setState({isLoading:!0,value:n}),setTimeout((function(){if(a.state.value.length<1)return a.setState(I);var e=new RegExp(C.a.escapeRegExp(a.state.value),"i"),t=function(t){return e.test(t.title)},n=C.a.reduce(_,(function(e,a,n){var r=C.a.filter(a.results,t);return r.length&&(e[n]={name:n,results:r}),e}),{});a.setState({isLoading:!1,results:n})}),300)},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.value,n=e.results;return r.a.createElement(D.a,Object.assign({category:!0,loading:t,onResultSelect:this.handleResultSelect,onSearchChange:C.a.debounce(this.handleSearchChange,500,{leading:!0}),results:n,value:a},this.props))}}]),t}(n.Component),L=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={isLoading:!1,error:!1,data:null,routes:[{path:"/books",component:function(e){return r.a.createElement(g,{data:a.state.data,match:e})}},{path:"/books/:id",component:function(e){return r.a.createElement(x,{match:e,data:a.state.data})}},{path:"/authors",component:function(){return r.a.createElement(E,{data:a.state.data})}},{path:"/authors/:id",component:function(e){return r.a.createElement(N,{match:e,data:a.state.data})}},{path:"/categories",component:function(){return r.a.createElement(k,{data:a.state.data})}},{path:"/categories/:id",component:function(e){return r.a.createElement(g,{match:e,data:a.state.data})}}]},a.normalizeData=function(e){var t={};return e.forEach((function(e){t[e.id]=Object(u.a)({},e)})),t},a.getDatafromServer=function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e).then((function(e){return e.json()})));case 1:case"end":return t.stop()}}))},a.loadData=function(){var e,t,n,r,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a.setState({isLoading:!0,error:!1}),s.prev=1,s.next=4,l.a.awrap(Promise.all([a.getDatafromServer("https://raw.githubusercontent.com/olesyamogil/books/master/database/books.json"),a.getDatafromServer("https://raw.githubusercontent.com/olesyamogil/books/master/database/authors.json"),a.getDatafromServer("https://raw.githubusercontent.com/olesyamogil/books/master/database/categories.json")]));case 4:e=s.sent,t=Object(i.a)(e,3),n=t[0],r=t[1],o=t[2],a.setState({data:{books:a.normalizeData(n),authors:a.normalizeData(r),categories:a.normalizeData(o)}}),s.next=15;break;case 12:s.prev=12,s.t0=s.catch(1),a.setState({error:!0});case 15:return s.prev=15,a.setState({isLoading:!1}),s.finish(15);case 18:case"end":return s.stop()}}),null,null,[[1,12,15,18]])},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){return null===this.state.data?r.a.createElement("div",{className:"errorMessage"},this.state.error?r.a.createElement("p",{className:"errorMessage__text"},"Opps...Could not fetch data from server. Try again."):r.a.createElement("p",{className:"errorMessage__text"},"Loading..."),r.a.createElement("button",{type:"button",onClick:this.loadData,className:"errorMessage__button"},"Load data")):r.a.createElement(f.a,null,r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header__title"},"Book Catalog"),r.a.createElement(A,{data:this.state.data}),r.a.createElement(j,{tabs:Object.keys(this.state.data)})),r.a.createElement(S,{content:this.state.routes}))}}]),t}(n.Component);var T=function(){return r.a.createElement(L,null)};s.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.2d5c7ac9.chunk.js.map